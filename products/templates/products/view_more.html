{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ product.name }} - My Shop</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/viewMore.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <!-- Burger menu -->
    <button class="burger" id="burger">
        <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Logo -->
    <a href="#" class="logo">My Shop</a>

    <!-- Search bar -->
    <input type="text" placeholder="Search...">

    <!-- Always-visible cart button -->
    <a href="{% url 'cart' %}" class="cart-btn">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cart-count" style="display:none;">0</span>
    </a>

    <!-- Right-side links (hidden in mobile unless opened) -->
    <div class="nav-links" id="nav-links">
        <a href="#">Login</a>
    </div>
</nav>
<!-- Go Back Button -->
<div class="go-back">
    <a href="{% url 'home' %}" class="back-btn">⬅ Go Back</a>
</div>

<!-- Main Layout -->
<main class="product-page">

    <!-- LEFT SIDE -->
    <div class="left-panel">
        <!-- Product Image -->
        <div class="product-image">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% endif %}
        </div>
        <!-- Description -->
        
        <!-- Reviews Section -->
        <div class="description">
            <h2>Description</h2>
            <div class="hr"></div>
            <p>{{ product.description }}</p>
        </div>
    </div>

    <!-- RIGHT SIDE -->
    <div class="right-panel">

        <!-- Product Info + Description -->
        <div class="product-info">
            <h1>{{ product.name }}</h1>
            <div class="hr"></div>
            {% if product.brand %}<p><strong>Brand:</strong> {{ product.brand }}</p>{% endif %}
            {% if product.category %}<p><strong>Category:</strong> {{ product.category }}</p>{% endif %}
            {% if product.subCategory %}<p><strong>Subcategory:</strong> {{ product.subCategory }}</p>{% endif %}
            
            <p class="stock">{% if product.stock > 0 %} In Stock{% else %} Out of Stock{% endif %}</p>
            
            <!-- Rating -->
            <p class="rating">
                <strong>Rating:</strong>
                {% if product.average_rating %}
                    {{ product.average_rating }}/10
                    {% for i in "12345678910"|slice:":product.average_rating"|make_list %}
                        ★
                    {% endfor %}
                {% else %}
                    ?
                {% endif %}
            </p>

            <p class="price"><strong>Price:</strong> ${{ product.price }}</p>
        </div>

        <!-- Add Review Form (placeholder for later) -->
        <div class="add-review">
            <h2>Add a Review</h2>
            <div class="hr "></div>
            <p>Login & purchase required to leave a review.</p>
        </div>

       
    </div>
</main>
<!-- Similar Products Carousel -->
<section class="similar-and-reviews">
    <div class="reviews">
        <h2>Reviews</h2>
        <p>No reviews yet. (Users will add them later)</p>
    </div>
    <div class="similarCont">
        <h2>Similar Products</h2>
        <div class="carousel-container">
            {% for p in similar_products %}
            <div class="carousel-item">
                <a href="{% url 'view_more' p.id %}">
                    {% if p.image %}
                    <img src="{{ p.image.url }}" alt="{{ p.name }}">
                    {% endif %}
                    <h3>{{ p.name }}</h3>
                    <p class="price">${{ p.price }}</p>
                    <p class="rating">
                        {% if p.average_rating %}
                            {{ p.average_rating }}/10
                            {% for i in "12345678910"|slice:":p.average_rating"|make_list %}
                                ★
                            {% endfor %}
                        {% else %}
                            ?
                        {% endif %}
                    </p>
                </a>
            </div>
            {% endfor %}
        </div>    
    </div>
    
</section>


</body>
</html>
